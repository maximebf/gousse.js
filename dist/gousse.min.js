!function(e,t){"function"==typeof define&&define.amd?define([],()=>e.gousse=t()):"object"==typeof exports&&"string"!=typeof exports.nodeName?module.exports=t():(e.gousse=t(),"undefined"!=typeof window&&document.head.querySelectorAll("script").forEach(t=>{if(t.getAttribute("src").match(/gousse(-all)?(\.min)?\.js\?/)){let o=t.getAttribute("src").split("?")[1].split("&");-1!==o.indexOf("globals")&&e.gousse.importGlobals(),-1!==o.indexOf("shadow=replace")&&(e.gousse.component.customElementsShadowMode="replace"),-1!==o.indexOf("shadow=false")&&(e.gousse.component.customElementsShadowMode=!1),-1===o.indexOf("shadow=true")&&-1===o.indexOf("shadow")||(e.gousse.component.customElementsShadowMode=!0)}}))}("undefined"!=typeof self?self:this,()=>{function ensureArray(e){return e instanceof NodeList?Array.prototype.slice.call(e,0):e?Array.isArray(e)?e:[e]:[]}function on(e,t,o,n){if("function"==typeof t)[n,o,t,e]=[o,t,e,document.body];else{if(e instanceof DocumentFragment)return void e.childNodes.forEach(e=>on(e,t,o,n));if(!(e instanceof Node))if(e){if("string"!=typeof e)return void Object.entries(e).forEach(([e,t])=>on(e,t));e=document.querySelector(e)}else e=document.body}let s;const r=e=>{o(e),n&&s()};return s=(()=>ensureArray(t).forEach(t=>e.removeEventListener(t,r))),ensureArray(t).forEach(t=>e.addEventListener(t,r)),s}function dispatch(e,t,o){let n=new CustomEvent(e,{detail:t,bubbles:!0});(o||document.body).dispatchEvent(n)}function emitter(e,t,o){return ensureArray(o||["change","keyup"]).forEach(o=>{on(e,o,o=>dispatch("ValueEmitted",{name:t,value:o.target.value},e))}),e}emitter.context=function(e,t){return ensureArray(t).map(t=>(on(t,"ValueEmitted",t=>{t.stopPropagation(),e[t.detail.name]=t.detail.value}),t))};const attributeAnnotations={transform:(e,t,o)=>{Object.entries(attributeAnnotations).forEach(([n,s])=>{"transform"!==n&&e.querySelectorAll(`[data-${n}]`).forEach(e=>{s(e,e.getAttribute(`data-${n}`),t,o)})})},dispatch:(node,value,rootNode,evalThisArg)=>{on(node,node.getAttribute("data-dispatch-event")||"click",()=>{let data=null;node.hasAttribute("data-dispatch-value")&&(data=function(){return eval("`"+node.getAttribute("data-dispatch-value")+"`")}.bind(evalThisArg||null)()),dispatch(value,data,rootNode)})},emit:(e,t)=>{emitter(e,t)},connect:(node,value,rootNode,evalThisArg)=>{let visibility=node.getAttribute("data-visibility")||"show";"hide"!==visibility&&node.classList.add("gousse-hide"),on(value,e=>{node.hasAttribute("data-content")&&(node.innerText=function(event){return eval("`"+node.getAttribute("data-content")+"`")}.bind(evalThisArg||null)(e)),"hide"===visibility?node.classList.add("gousse-hide"):"toggle"===visibility?node.classList.toggle("gousse-hide"):node.classList.remove("gousse-hide")},!node.hasAttribute("data-content")&&!visibility)},emitted:(node,value,rootNode,evalThisArg)=>{on(rootNode,"ValueEmitted",e=>{e.detail.name===value&&(node.hasAttribute("data-content")?node.innerText=function(value){return eval("`"+node.getAttribute("data-content")+"`")}.bind(evalThisArg||null)(e.detail.value):node.innerText=e.detail.value)})}},dom={query:(...e)=>document.querySelector(...e),queryAll:(...e)=>document.querySelectorAll(...e),setAttributes(e,t){Object.entries(t).forEach(([t,o])=>{t in attributeAnnotations?attributeAnnotations[t](e,o):t.match(/^data-/)&&t.substr(5)in attributeAnnotations?attributeAnnotations[t.substr(5)](e,o):"innerHTML"===t?Promise.resolve(o).then(t=>{e.innerHTML=t}):t.match(/^on/)&&"function"==typeof o?e.addEventListener(t.substring(2),o):null!==o&&void 0!==o&&e.setAttribute(t,o)})},create(e,t,...o){let n=e;return"string"==typeof e?n=document.createElement(e):n.innerHTML="",t&&dom.setAttributes(n,t),"A"!==n.tagName||n.hasAttribute("href")||n.setAttribute("href","javascript:"),dom.append(n,o),n},append(e,t,o){e instanceof Node||(e=document.querySelector(e));let n=[];for(let s of ensureArray(t))if(Array.isArray(s))n=n.concat(dom.append(e,s,o));else if(s instanceof Promise){let t=document.createComment("placeholder");n=n.concat(dom.append(e,t,o)),s.then(o=>{dom.append(e,o,t),e.removeChild(t)})}else s&&(s instanceof Node||s instanceof DocumentFragment||(s=document.createTextNode(s)),o?e.insertBefore(s,o):e.appendChild(s),n.push(s));return n},remove:e=>ensureArray(e).map(e=>e.parentNode.removeChild(e)),replace:(e,t)=>t.parentNode.replaceChild(e,t),content:(e,...t)=>(e.innerHTML="",dom.append(e,t))},h=dom.create;function connect(e,t,o,n){const s=h("div",{class:"gousse-connect"}),r=e=>{let o=t(e,r);o?dom.content(s,o):!1===o&&(s.innerHTML="")};return e instanceof Promise?e.then(r):Array.isArray(e)||"string"==typeof e?on(e,r,n):([n,o,t]=[!1,t,null],Object.entries(e).forEach(([e,t])=>on(e,e=>dom.content(s,t(e))))),!0===o&&t?r():!0!==o&&dom.append(s,o),s}async function template(tpl,vars,...children){tpl="string"==typeof tpl?await ready(()=>document.getElementById(tpl)):await Promise.resolve(tpl);const root=document.importNode(tpl.content,!0);if(root.querySelectorAll("[data-var]").forEach(node=>{let value=vars[node.getAttribute("data-var")];void 0!==value&&(node.hasAttribute("data-content")?node.innerText=(value=>eval("`"+node.getAttribute("data-content")+"`"))(value):node.innerText=value)}),root.querySelectorAll("[data-attr-vars]").forEach(e=>{e.getAttribute("data-attr-vars").split(",").forEach(t=>{let[o,n]=-1!==t.indexOf(":")?t.split(":"):[t,t];void 0!==vars[o]&&"false"!==vars[o]&&e.setAttribute(n,vars[o])})}),children.length){const e=root.querySelector("slot");e&&(dom.append(e.parentNode,children,e),dom.remove(e))}return Object.entries(vars||{}).forEach(([e,t])=>{if(e.match(/^on/)){let o=e.substr(2),n=root.childNodes;"-1"!==o.indexOf(":")&&(n=root.querySelectorAll(o.substr(o.indexOf(":")+1)),o=o.substr(0,o.indexOf(":"))),n.forEach(e=>e.addEventListener(o,t))}}),root}class ComponentContext{constructor(e,t,o){this.renderCallback=e,this.eventDispatcher=t,this.rootNode=o,this.isConnected=!1,this.connectCallbacks=[],this.disconnectCallbacks=[]}onconnect(e){this.isConnected?e():this.connectCallbacks.push(e)}connected(){this.isConnected=!0,this.connectCallbacks.forEach(e=>requestAnimationFrame(e))}ondisconnect(e){this.disconnectCallbacks.push(e)}disconnected(){this.disconnectCallbacks.forEach(e=>e())}on(e,t,o){this.onconnect(()=>this.ondisconnect(on(e,t,o)))}dispatch(e,t,o){"string"==typeof e?[o,t]=[t,e]:e&&e.stopPropagation(),dispatch(t,o,this.eventDispatcher||this.node)}emit(e,t){dispatch("ValueEmitted",{name:e,value:t},this.eventDispatcher||this.node)}waitOnRenderCallbackResult(e){return e instanceof Promise?e.then(e=>this.waitOnRenderCallbackResult(e)):Array.isArray(e)&&e.some(e=>e instanceof Promise)?Promise.all(e):ensureArray(e)}processRenderNodes(e,t){return this.nodes=e,this.node=this.rootNode||e[e.length-1],emitter.context(this,e),e.forEach(e=>attributeAnnotations.transform(e,this.eventDispatcher,this)),t&&t(e),this.nodes}render(e,t,o){let n=this.waitOnRenderCallbackResult(this.renderCallback.call(this,e,t,this));return n instanceof Promise?n.then(e=>this.processRenderNodes(e,o)):this.processRenderNodes(n,o)}querySelector(...e){return this.node.querySelector(...e)}querySelectorAll(...e){return this.node.querySelectorAll(...e)}}class ComponentElement extends HTMLElement{constructor(e,t){super(),this.shadowMode=void 0!==t&&t,this.rootNode=!0===this.shadowMode?this.attachShadow({mode:"open"}):this,this.context=new ComponentContext(e,this,"replace"!==this.shadowMode?this.rootNode:null),this.virtualSlot=document.createComment("slot"),this.hasBeenReplaced=!1}render(){let e={};for(let t of this.getAttributeNames())e[t]=this.getAttribute(t);let t=Array.prototype.slice.call(this.childNodes,0);return!0!==this.shadowMode&&t.push(this.virtualSlot),Promise.resolve(this.context.render(e,t)).then(()=>{"replace"===this.shadowMode?(dom.replace(this.context.node,this.rootNode),this.rootNode=this.context.node,this.hasBeenReplaced=!0):dom.content(this.rootNode,this.context.nodes)})}connectedCallback(){this.render().then(()=>{!0!==this.shadowMode&&(this.observer=new MutationObserver(e=>{null!==this.virtualSlot.parentNode&&e.forEach(e=>{for(let t of e.addedNodes)t.parentNode===this&&this.virtualSlot.parentNode.insertBefore(t,this.virtualSlot)})}),this.observer.observe(this,{childList:!0})),this.context.connected()})}disconnectedCallback(){void 0!==this.observer&&this.observer.disconnect(),this.context.disconnected()}addEventListener(...e){"replace"===this.shadowMode?this.hasBeenReplaced?this.rootNode.addEventListener(...e):this.context.onconnect(()=>this.rootNode.addEventListener(...e)):super.addEventListener(...e)}}function defineComponentElement(e,t,o){component.customElementsAvailable?window.customElements.define(e,class extends ComponentElement{constructor(){super(t,o)}}):console.error("Custom elements are not supported in this browser")}function component(e,t,o){if("function"==typeof e&&([t,e]=[e,null]),e&&component.customElementsAvailable){if(o=void 0!==o?o:component.customElementsShadowMode,defineComponentElement(e,t,o),"replace"!==o)return(t,...o)=>h(e,t,...o)}else e&&console.error("component(): Custom elements are not available, all components fallback to JS definition only");return function(e,...o){const n=new ComponentContext(t);return n.render(e||{},o,()=>{n.node.addEventListener("DOMNodeInsertedIntoDocument",()=>n.connected()),n.node.addEventListener("DOMNodeRemovedFromDocument",()=>n.disconnected())})}}function ready(e){return new Promise(t=>{ready.dispatched?t(!e||e()):document.addEventListener("GousseReady",()=>t(!e||e()))})}function App(e,t){return ready(()=>{void 0!==t||e instanceof Node?e=e||document.body:[t,e]=[e,document.body],attributeAnnotations.transform(e),window.emittedValues={},emitter.context(window.emittedValues,e),"function"==typeof t?dom.append(e,t(e)):Array.isArray(t)||t instanceof Node||t instanceof Promise?dom.append(e,t):t&&on(t),dispatch("AppReady")})}component.customElementsAvailable="customElements"in window,component.customElementsShadowMode=!1,ready.dispatched=!1,ready.promises=[],document.addEventListener("DOMContentLoaded",()=>{Promise.all(ready.promises).then(()=>{ready.dispatched=!0,dispatch("GousseReady")})}),ready(()=>{const e=document.querySelector(".app-root");e&&App(e),component.customElementsAvailable&&document.querySelectorAll("template[data-component]").forEach(e=>{let t=e.hasAttribute("data-shadow")?e.getAttribute("data-shadow"):void 0;component(e.getAttribute("data-component"),(t,o)=>template(e,t,...o),"false"!==t&&("true"===t||t))}),document.head.appendChild(h("style",{type:"text/css"},"\n        .gousse-hide { display: none; }\n        .gousse-connect { display: inline-block; }\n    "))});let gousse={on:on,dispatch:dispatch,emitter:emitter,dom:dom,h:h,connect:connect,template:template,ComponentElement:ComponentElement,component:component,defineComponentElement:defineComponentElement,ready:ready,App:App,attributeAnnotations:attributeAnnotations,globallyImported:!1,excludedGlobalImports:["importGlobals","globallyImported","excludedGlobalImports"],importGlobals:e=>{e&&!gousse.globallyImported||(gousse.globallyImported=!0,Object.entries(gousse).forEach(([e,t])=>{-1===gousse.excludedGlobalImports.indexOf(e)&&"_"!==e.substr(0,1)&&(window[e]=t)}))}};return gousse});