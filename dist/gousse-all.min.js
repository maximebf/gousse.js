(function(root,factory){if(typeof define==="function"&&define.amd){define([],()=>{return root.gousse=factory()})}else if(typeof exports==="object"&&typeof exports.nodeName!=="string"){module.exports=factory()}else{root.gousse=factory();if(typeof window!=="undefined"){document.head.querySelectorAll("script").forEach(node=>{if(node.getAttribute("src").match(/gousse(-all)?(\.min)?\.js\?/)){let qs=node.getAttribute("src").split("?")[1].split("&");if(qs.indexOf("globals")!==-1){gousse.importGlobals()}if(qs.indexOf("shadow=replace")!==-1){gousse.component.customElementsShadowMode="replace"}if(qs.indexOf("shadow=false")!==-1){gousse.component.customElementsShadowMode=false}if(qs.indexOf("shadow=true")!==-1||qs.indexOf("shadow")!==-1){gousse.component.customElementsShadowMode=true}}})}}})(typeof self!=="undefined"?self:this,()=>{function ensureArray(items){if(items instanceof NodeList){return Array.prototype.slice.call(items,0)}return!items?[]:!Array.isArray(items)?[items]:items}function on(node,eventName,listener,onceOnly){if(typeof eventName==="function"){[onceOnly,listener,eventName,node]=[listener,eventName,node,document.body]}else if(node instanceof DocumentFragment){node.childNodes.forEach(child=>on(child,eventName,listener,onceOnly));return}else if(!(node instanceof Node)){if(!node){node=document.body}else if(typeof node==="string"){node=document.querySelector(node)}else{Object.entries(node).forEach(([key,value])=>on(key,value));return}}let off;const wrappedListener=e=>{listener(e);if(onceOnly){off()}};off=(()=>ensureArray(eventName).forEach(e=>node.removeEventListener(e,wrappedListener)));ensureArray(eventName).forEach(e=>node.addEventListener(e,wrappedListener));return off}function dispatch(eventName,data,node){let e=new CustomEvent(eventName,{detail:data,bubbles:true});(node||document.body).dispatchEvent(e)}function emitter(node,name,eventNames){ensureArray(eventNames||["change","keyup"]).forEach(event=>{on(node,event,e=>dispatch("ValueEmitted",{name:name,value:e.target.value},node))});return node}emitter.context=function(vars,nodes){return ensureArray(nodes).map(node=>{on(node,"ValueEmitted",e=>{e.stopPropagation();vars[e.detail.name]=e.detail.value});return node})};const attributeAnnotations={transform:(node,rootNode,evalThisArg)=>{Object.entries(attributeAnnotations).forEach(([name,callback])=>{if(name==="transform")return;node.querySelectorAll(`[data-${name}]`).forEach(node=>{callback(node,node.getAttribute(`data-${name}`),rootNode,evalThisArg)})})},dispatch:(node,value,rootNode,evalThisArg)=>{on(node,node.getAttribute("data-dispatch-event")||"click",()=>{let data=null;if(node.hasAttribute("data-dispatch-value")){data=function(){return eval("`"+node.getAttribute("data-dispatch-value")+"`")}.bind(evalThisArg||null)()}dispatch(value,data,rootNode)})},emit:(node,value)=>{emitter(node,value)},connect:(node,value,rootNode,evalThisArg)=>{let visibility=node.getAttribute("data-visibility")||"show";if(visibility!=="hide"){node.classList.add("gousse-hide")}on(value,e=>{if(node.hasAttribute("data-content")){node.innerText=function(event){return eval("`"+node.getAttribute("data-content")+"`")}.bind(evalThisArg||null)(e)}if(visibility==="hide"){node.classList.add("gousse-hide")}else if(visibility==="toggle"){node.classList.toggle("gousse-hide")}else{node.classList.remove("gousse-hide")}},!node.hasAttribute("data-content")&&!visibility)},emitted:(node,value,rootNode,evalThisArg)=>{on(rootNode,"ValueEmitted",e=>{if(e.detail.name===value){if(node.hasAttribute("data-content")){node.innerText=function(value){return eval("`"+node.getAttribute("data-content")+"`")}.bind(evalThisArg||null)(e.detail.value)}else{node.innerText=e.detail.value}}})}};const dom={query:(...args)=>document.querySelector(...args),queryAll:(...args)=>document.querySelectorAll(...args),setAttributes(node,attrs){Object.entries(attrs).forEach(([name,value])=>{if(name in attributeAnnotations){attributeAnnotations[name](node,value)}else if(name.match(/^data-/)&&name.substr(5)in attributeAnnotations){attributeAnnotations[name.substr(5)](node,value)}else if(name==="innerHTML"){Promise.resolve(value).then(html=>{node.innerHTML=html})}else if(name.match(/^on/)&&typeof value==="function"){node.addEventListener(name.substring(2),value)}else if(value!==null&&value!==undefined){node.setAttribute(name,value)}})},create(tagName,attrs,...children){let node=tagName;if(typeof tagName==="string"){node=document.createElement(tagName)}else{node.innerHTML=""}if(attrs){dom.setAttributes(node,attrs)}if(node.tagName==="A"&&!node.hasAttribute("href")){node.setAttribute("href","javascript:")}dom.append(node,children);return node},append(parent,nodes,insertBefore){if(!(parent instanceof Node)){parent=document.querySelector(parent)}let out=[];for(let node of ensureArray(nodes)){if(Array.isArray(node)){out=out.concat(dom.append(parent,node,insertBefore))}else if(node instanceof Promise){let placeholder=document.createComment("placeholder");out=out.concat(dom.append(parent,placeholder,insertBefore));node.then(nodes=>{dom.append(parent,nodes,placeholder);parent.removeChild(placeholder)})}else if(node){if(!(node instanceof Node)&&!(node instanceof DocumentFragment)){node=document.createTextNode(node)}if(insertBefore){parent.insertBefore(node,insertBefore)}else{parent.appendChild(node)}out.push(node)}}return out},remove:nodes=>ensureArray(nodes).map(node=>node.parentNode.removeChild(node)),replace:(newNode,oldNode)=>oldNode.parentNode.replaceChild(newNode,oldNode),content(node,...children){node.innerHTML="";return dom.append(node,children)}};const h=dom.create;function connect(eventName,listener,placeholder,onceOnly){const container=h("div",{class:"gousse-connect"});const render=e=>{let result=listener(e,render);if(result){dom.content(container,result)}else if(result===false){container.innerHTML=""}};if(eventName instanceof Promise){eventName.then(render)}else if(Array.isArray(eventName)||typeof eventName==="string"){on(eventName,render,onceOnly)}else{[onceOnly,placeholder,listener]=[false,listener,null];Object.entries(eventName).forEach(([key,value])=>on(key,e=>dom.content(container,value(e))))}if(placeholder===true&&listener){render()}else if(placeholder!==true){dom.append(container,placeholder)}return container}async function template(tpl,vars,...children){if(typeof tpl==="string"){tpl=await ready(()=>document.getElementById(tpl))}else{tpl=await Promise.resolve(tpl)}const root=document.importNode(tpl.content,true);root.querySelectorAll("[data-var]").forEach(node=>{let value=vars[node.getAttribute("data-var")];if(typeof value==="undefined"){return}if(node.hasAttribute("data-content")){node.innerText=(value=>eval("`"+node.getAttribute("data-content")+"`"))(value)}else{node.innerText=value}});root.querySelectorAll("[data-attr-vars]").forEach(node=>{node.getAttribute("data-attr-vars").split(",").forEach(part=>{let[varName,name]=part.indexOf(":")!==-1?part.split(":"):[part,part];if(typeof vars[varName]!=="undefined"&&vars[varName]!=="false"){node.setAttribute(name,vars[varName])}})});if(children.length){const slot=root.querySelector("slot");if(slot){dom.append(slot.parentNode,children,slot);dom.remove(slot)}}Object.entries(vars||{}).forEach(([key,value])=>{if(key.match(/^on/)){let event=key.substr(2);let nodes=root.childNodes;if(event.indexOf(":")!=="-1"){nodes=root.querySelectorAll(event.substr(event.indexOf(":")+1));event=event.substr(0,event.indexOf(":"))}nodes.forEach(node=>node.addEventListener(event,value))}});return root}class ComponentContext{constructor(renderCallback,eventDispatcher,rootNode){this.renderCallback=renderCallback;this.eventDispatcher=eventDispatcher;this.rootNode=rootNode;this.isConnected=false;this.connectCallbacks=[];this.disconnectCallbacks=[]}onconnect(listener){if(this.isConnected){listener()}else{this.connectCallbacks.push(listener)}}connected(){this.isConnected=true;this.connectCallbacks.forEach(fn=>requestAnimationFrame(fn))}ondisconnect(listener){this.disconnectCallbacks.push(listener)}disconnected(){this.disconnectCallbacks.forEach(fn=>fn())}on(eventName,listener,onceOnly){this.onconnect(()=>this.ondisconnect(on(eventName,listener,onceOnly)))}dispatch(originalEvent,name,data){if(typeof originalEvent==="string"){[data,name]=[name,originalEvent]}else if(originalEvent){originalEvent.stopPropagation()}dispatch(name,data,this.eventDispatcher||this.node)}emit(name,value){dispatch("ValueEmitted",{name:name,value:value},this.eventDispatcher||this.node)}waitOnRenderCallbackResult(result){if(result instanceof Promise){return result.then(result=>this.waitOnRenderCallbackResult(result))}if(Array.isArray(result)&&result.some(value=>value instanceof Promise)){return Promise.all(result)}return ensureArray(result)}processRenderNodes(nodes,afterRenderCallback){this.nodes=nodes;this.node=this.rootNode||nodes[nodes.length-1];emitter.context(this,nodes);nodes.forEach(node=>attributeAnnotations.transform(node,this.eventDispatcher,this));afterRenderCallback&&afterRenderCallback(nodes);return this.nodes}render(attrs,children,afterRenderCallback){let result=this.waitOnRenderCallbackResult(this.renderCallback.call(this,attrs,children,this));if(result instanceof Promise){return result.then(nodes=>this.processRenderNodes(nodes,afterRenderCallback))}return this.processRenderNodes(result,afterRenderCallback)}querySelector(...args){return this.node.querySelector(...args)}querySelectorAll(...args){return this.node.querySelectorAll(...args)}}class ComponentElement extends HTMLElement{constructor(renderCallback,shadowMode){super();this.shadowMode=shadowMode===undefined?false:shadowMode;this.rootNode=this.shadowMode===true?this.attachShadow({mode:"open"}):this;this.context=new ComponentContext(renderCallback,this,this.shadowMode!=="replace"?this.rootNode:null);this.virtualSlot=document.createComment("slot");this.hasBeenReplaced=false}render(){let attrs={};for(let name of this.getAttributeNames()){attrs[name]=this.getAttribute(name)}let children=Array.prototype.slice.call(this.childNodes,0);if(this.shadowMode!==true){children.push(this.virtualSlot)}return Promise.resolve(this.context.render(attrs,children)).then(()=>{if(this.shadowMode==="replace"){dom.replace(this.context.node,this.rootNode);this.rootNode=this.context.node;this.hasBeenReplaced=true}else{dom.content(this.rootNode,this.context.nodes)}})}connectedCallback(){this.render().then(()=>{if(this.shadowMode!==true){this.observer=new MutationObserver(mutations=>{if(this.virtualSlot.parentNode===null)return;mutations.forEach(mutation=>{for(let node of mutation.addedNodes){if(node.parentNode===this){this.virtualSlot.parentNode.insertBefore(node,this.virtualSlot)}}})});this.observer.observe(this,{childList:true})}this.context.connected()})}disconnectedCallback(){if(typeof this.observer!=="undefined"){this.observer.disconnect()}this.context.disconnected()}addEventListener(...args){if(this.shadowMode==="replace"){if(this.hasBeenReplaced){this.rootNode.addEventListener(...args)}else{this.context.onconnect(()=>this.rootNode.addEventListener(...args))}}else{super.addEventListener(...args)}}}function defineComponentElement(name,renderCallback,shadowMode){if(!component.customElementsAvailable){console.error("Custom elements are not supported in this browser");return}window.customElements.define(name,class extends ComponentElement{constructor(){super(renderCallback,shadowMode)}})}function component(name,renderCallback,shadow){if(typeof name==="function"){[renderCallback,name]=[name,null]}if(name&&component.customElementsAvailable){shadow=shadow!==undefined?shadow:component.customElementsShadowMode;defineComponentElement(name,renderCallback,shadow);if(shadow!=="replace"){return(attrs,...children)=>h(name,attrs,...children)}}else if(name){console.error("component(): Custom elements are not available, all components fallback to JS definition only")}return function(attrs,...children){const ctx=new ComponentContext(renderCallback);return ctx.render(attrs||{},children,()=>{ctx.node.addEventListener("DOMNodeInsertedIntoDocument",()=>ctx.connected());ctx.node.addEventListener("DOMNodeRemovedFromDocument",()=>ctx.disconnected())})}}component.customElementsAvailable="customElements"in window;component.customElementsShadowMode=false;function ready(callback){return new Promise(resolve=>{if(ready.dispatched){resolve(callback?callback():true)}else{document.addEventListener("GousseReady",()=>resolve(callback?callback():true))}})}ready.dispatched=false;ready.promises=[];document.addEventListener("DOMContentLoaded",()=>{Promise.all(ready.promises).then(()=>{ready.dispatched=true;dispatch("GousseReady")})});function App(rootNode,spec){return ready(()=>{if(spec===undefined&&!(rootNode instanceof Node)){[spec,rootNode]=[rootNode,document.body]}else{rootNode=rootNode||document.body}attributeAnnotations.transform(rootNode);window.emittedValues={};emitter.context(window.emittedValues,rootNode);if(typeof spec==="function"){dom.append(rootNode,spec(rootNode))}else if(Array.isArray(spec)||spec instanceof Node||spec instanceof Promise){dom.append(rootNode,spec)}else if(spec){on(spec)}dispatch("AppReady")})}ready(()=>{const appNode=document.querySelector(".app-root");if(appNode){App(appNode)}if(component.customElementsAvailable){document.querySelectorAll("template[data-component]").forEach(node=>{let shadow=node.hasAttribute("data-shadow")?node.getAttribute("data-shadow"):undefined;component(node.getAttribute("data-component"),(attrs,children)=>{return template(node,attrs,...children)},shadow==="false"?false:shadow==="true"?true:shadow)})}document.head.appendChild(h("style",{type:"text/css"},`\n        .gousse-hide { display: none; }\n        .gousse-connect { display: inline-block; }\n    `))});let gousse={on:on,dispatch:dispatch,emitter:emitter,dom:dom,h:h,connect:connect,template:template,ComponentElement:ComponentElement,component:component,defineComponentElement:defineComponentElement,ready:ready,App:App,attributeAnnotations:attributeAnnotations};gousse.globallyImported=false;gousse.excludedGlobalImports=["importGlobals","globallyImported","excludedGlobalImports"];gousse.importGlobals=(onlyIfAlreadyImported=>{if(onlyIfAlreadyImported&&!gousse.globallyImported){return}gousse.globallyImported=true;Object.entries(gousse).forEach(([key,value])=>{if(gousse.excludedGlobalImports.indexOf(key)===-1&&key.substr(0,1)!=="_"){window[key]=value}})});return gousse});(function(factory){if(typeof window.gousse==="undefined"){console.error("Cannot import Gousse Router because Gousse is missing");return}factory(window.gousse);window.gousse.importGlobals(true)})(gousse=>{function router(routes,routeCallback){if(typeof routes==="string"){routes={[routes]:routeCallback}}let current;return gousse.connect("RouteChanged",()=>{for(let url of Object.keys(routes)){let[matches,wildcard]=router.match(url);if(matches){if(wildcard&&current&&current.url===url&&current.matches.toString()===matches.toString()){return}current={url:url,matches:matches};return routes[url](...matches,router.current.params,router.current.state)}}current=null;if("404"in routes){return routes["404"](router.current.params,router.current.state)}return false},true)}router.match=function(template,url){if(url===undefined){url=router.current.url}let names=[],wildcard;url=url.replace(/\/$/,"");url=url===""?"/":url;if(typeof template==="string"&&template.substr(0,1)!=="^"){template=template.replace(/\//g,"\\/").replace(/\./g,"\\.").replace(/\{[^}*]+\}/g,"([^/]+)");if(template.match(/\\\/\{?\*\}?$/)){wildcard=template.substr(template.length-1,1)==="*"?".*":"(.*)";template=template.substr(0,template.length-3)+wildcard}template=new RegExp("^"+template+"$","i")}else if(typeof template==="string"&&template.substr(0,1)==="^"){template=new RegExp(template,"i")}let matches=url.match(template);return[matches?matches.slice(1):false,wildcard===".*"]};router.usePushState=false;router._hashchangeListener=(()=>router.dispatch(window.location.hash.substr(1)));router._popstateListener=(e=>router.dispatch(window.location.pathname+window.location.search,e?e.state:null));router.pushstate=function(){window.removeEventListener("hashchange",router._hashchangeListener);window.addEventListener("popstate",router._popstateListener);window.addEventListener("hashchange",()=>gousse.dispatch("RouteHashChanged",window.location.hash.substr(1)));router.usePushState=true;router._popstateListener(window.history)};router.parseQueryString=function(qs){let params={};qs.split("&").forEach(v=>{let[key,value]=v.indexOf("=")!==-1?v.split("="):[v,true];params[key]=decodeURIComponent(value)});return params};router.buildQueryString=function(params){return Object.entries(params).filter(([k,v])=>!!v).map(([k,v])=>k+"="+encodeURIComponent(v)).join("&")};router.dispatch=function(url,state){let params={};url=url===""?"/":url;if(url.indexOf("?")!==-1){params=router.parseQueryString(url.substr(url.indexOf("?")+1));url=url.substr(0,url.indexOf("?"))}router.current={url:url,state:state,params:params};gousse.dispatch("RouteChanged",router.current)};router.go=function(url,params,state){url=router.url(url,params);if(router.usePushState&&url.substr(0,1)!=="#"){window.history.pushState(state||{},"",url);router._popstateListener({state:state})}else{window.location.hash=url.substr(0,1)==="#"?url.substr(1):url}};router.url=function(url,params,external){url=url.replace(/\/\{?\*\}?$/,"");if(params&&Object.keys(params).length){Object.keys(params).forEach(k=>{if(url.indexOf(`{${k}}`)!==-1){url=url.replace(`{${k}}`,params[k]);delete params[k]}});let qs=router.buildQueryString(params);if(qs){url+=Object.keys(params).length?(url.indexOf("?")!==-1?"&":"?")+qs:""}}if(external){return document.location.protocol+"//"+document.location.host+url}return url};gousse.router=router;gousse.attributeAnnotations.go=((node,value,rootNode,evalThisArg)=>{if(node.tagName==="A"){on(node,"click",e=>{e.preventDefault();router.go(function(){return eval("`"+value+"`")}.bind(evalThisArg)())});if(!node.hasAttribute("href")){node.setAttribute("href","javascript:")}}});gousse.ready(()=>{window.addEventListener("hashchange",router._hashchangeListener);router._hashchangeListener()})});(function(factory){if(typeof window.gousse==="undefined"){console.error("Cannot import Gousse Store because Gousse is missing");return}factory(window.gousse);window.gousse.importGlobals(true)})(gousse=>{function observe(object,listener,deep,notifyOnMethods){if(Array.isArray(object.__isObserveProxy?object.__target:object)&&notifyOnMethods===undefined){notifyOnMethods=["push","pop","fill","sort","shift","splice","reverse","unshift"]}const handler={get(target,property,receiver){if(property==="__isObserveProxy"){return true}else if(property==="__target"){return object.__isObserveProxy?object.__target:object}else if(property==="__notify"){return listener}if(notifyOnMethods&&notifyOnMethods.indexOf(property)!==-1){return new Proxy(target[property],{apply(target,thisArg,args){let r=target.apply(object,args);listener(property,r);return r}})}return deep&&typeof target[property]==="object"?observe(target[property],listener,true):target[property]},set(target,property,value){target[property]=value;listener("set",property,value);return true},apply(target,thisArg,args){let r=target.apply(thisArg,args);listener("apply",r);return r}};return new Proxy(object,handler)}function debounce(func,wait,thisArg){let timeout,args,debounced=function(){args=arguments;clearTimeout(timeout);timeout=setTimeout(function(){timeout=null;func.apply(thisArg,args)},wait||100)};debounced.immediate=function(){clearTimeout(timeout);timeout=null;return func.apply(thisArg,arguments)};return debounced}function persist(key,initial,deep){let data=localStorage.getItem(key);if(data!==null){data=JSON.parse(data)}else{data=typeof initial==="function"?initial():initial}return observe(data,debounce(()=>{localStorage.setItem(key,JSON.stringify(data))}),deep)}function store(items,persisted){items=items||[];if(!Array.isArray(items)){throw new Error("items in store(items) must be an array")}if(persisted){items=persist(persisted,items,true)}let observers=[];const methods={observe(fn,immediate){observers.push(fn);if(immediate===undefined||immediate){fn()}return()=>methods.unobserve(fn)},unobserve(fn){let idx=observers.indexOf(fn);if(idx!==-1){observers.splice(idx,1)}}};return new Proxy(observe(items,(...args)=>{observers.forEach(fn=>fn(...args))},true),{get(target,property){if(property in methods){return methods[property]}return target[property]}})}Object.assign(gousse,{observe:observe,debounce:debounce,persist:persist,store:store})});(function(factory){if(typeof window.gousse==="undefined"){console.error("Cannot import Gousse UI because Gousse is missing");return}factory(window.gousse);window.gousse.importGlobals(true);document.head.querySelectorAll("script").forEach(node=>{if(node.getAttribute("src").match(/gousse-(ui|all)(\.min)?\.js\?/)){let qs=node.getAttribute("src").split("?")[1].split("&");if(qs.indexOf("assets")!==-1){gousse.ready.promises.push(gousse.ui.loadAssets())}}})})(gousse=>{let ui=gousse.ui={};ui.assets=["https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css#integrity=sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO","https://code.jquery.com/jquery-3.3.1.slim.min.js#integrity=sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo","https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js#integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49","https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js#integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy","https://use.fontawesome.com/releases/v5.2.0/css/all.css#integrity=sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ"];ui.container=component("bs-container",(attrs,children)=>h("div",mergeattrs(attrs,{fluid:true},{fluid:v=>v?"container-fluid":"container"}),children));ui.row=component("bs-row",(attrs,children)=>h("div",mergeattrs(attrs,{class:"row"}),children));ui.col=component("bs-col",(attrs,children)=>{let col="col"+(attrs.s?"-"+attrs.s:"")+(attrs.w?"-"+attrs.w:"");return h("div",mergeattrs(attrs,{class:col}),children)});ui.alert=component("bs-alert",(attrs,children)=>h("div",mergeattrs(attrs,{class:"alert",color:"primary",role:"alert"},{color:"alert-%"}),attrs.heading?h("h4",{class:"alert-heading"},attrs.heading):null,children,attrs.dismissable?h("button",{type:"button",class:"close","data-dismiss":"alert","aria-label":"Close"},h("span",{"aria-hidden":"true"},"×")):null));ui.badge=component("bs-badge",(attrs,children)=>h(attrs.href?"a":"span",mergeattrs(attrs,{class:"badge",color:"secondary"},{color:"badge-%",pill:"badge-pill"}),attrs.value||children));ui.btn=component("bs-btn",(attrs,children)=>{let defaults={class:"btn",type:"button",color:"primary"};return h(attrs.tag||"button",mergeattrs(attrs,defaults,{label:null,outline:null,color:(color,out)=>attrs.outline?`btn-outline-${color}`:`btn-${color}`,size:"btn-%",block:"btn-block",disabled:(_,out)=>{out["disabled"]="disabled"}}),attrs.label||children)});ui.submitBtn=component("bs-submit-btn",(attrs,children)=>ui.btn(mergeattrs(attrs,{type:"submit"}),children));ui.btnGroup=component("bs-btn-group",(attrs,children)=>h("div",mergeattrs(attrs,{class:"btn-group",role:"group"},{size:"btn-group-%"}),children));ui.btnToolbar=component("bs-btn-toolbar",(attrs,children)=>h("div",mergeattrs(attrs,{class:"btn-toolbar",role:"toolbar"}),children));ui.btnDropdown=component("bs-btn-dropdown",(attrs,children)=>{const toggleAttrs={class:"dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"};const btnAllowedAttrs=["color","size","label",/^on/];return h("div",mergeattrs(attrs,{class:"btn-group"},{direction:"drop%"}),attrs.split?[ui.btn(mergeattrs(attrs,{},{},btnAllowedAttrs)),ui.btn(mergeattrs(attrs,mergeattrs(toggleAttrs,{class:"dropdown-toggle-split"}),{},["color","size"]),h("span",{class:"sr-only"},"Toggle dropdown"))]:ui.btn(mergeattrs(attrs,toggleAttrs,{},btnAllowedAttrs)),ui.dropdownMenu(mergeattrs(attrs,{},{},["rightmenu"]),children))});ui.dropdownMenu=component("bs-dropdown-menu",(attrs,children)=>h("div",mergeattrs(attrs,{class:"dropdown-menu"},{rightmenu:"dropdown-menu-right"}),children));ui.dropdownItem=component("bs-dropdown-item",(attrs,children)=>attrs.textonly?h("span",{class:"dropdown-item-text"},children):h("a",mergeattrs(attrs,{class:"dropdown-item"},{active:"active",disabled:"disabled"}),children));ui.dropdownDivider=component("bs-dropdown-divider",attrs=>h("div",mergeattrs(attrs,{class:"dropdown-divider"})));ui.dropdownHeader=component("bs-dropdown-header",(attrs,children)=>h("h6",mergeattrs(attrs,{class:"dropdown-header"}),children));ui.card=component("bs-card",(attrs,children)=>{let content=[];if(attrs.title){content.push(h("h5",{class:"card-title"},attrs.title))}if(attrs.subtitle){content.push(h("h6",{class:"card-subtitle mb-2 text-muted"},attrs.subtitle))}if(children.length){content.push(children)}let body=mergeattrs(attrs,{autobody:true}).autobody?h("div",{class:"card-body"},content):content;return h("div",mergeattrs(attrs,{class:"card"},{autobody:null,imgTop:null,header:null,footer:null,title:null,subtitle:null}),attrs.imgTop?h("img",{class:"card-img-top",src:attrs.imgTop,alt:""}):null,attrs.header?h("div",{class:"card-header"},attrs.header):null,body,attrs.footer?h("div",{class:"card-footer text-muted"},attrs.footer):null)});ui.listGroup=component("bs-list-group",(attrs,children)=>h("ul",mergeattrs(attrs,{class:"list-group"},{flush:"list-group-flush"}),children));ui.listGroupItem=component("bs-list-group-item",(attrs,children)=>h(attrs.tag||"li",mergeattrs(attrs,{class:"list-group-item"},{active:"active",disabled:"disabled",color:"list-group-item-%",justify:"d-flex justify-content-between align-items-center"}),children));ui.listGroupItemAction=component("bs-list-group-item-action",(attrs,children)=>ui.listGroupItem(mergeattrs(attrs,{tag:"a",class:"list-group-item-action"}),children));ui.nav=component("bs-nav",(attrs,children)=>h("ul",mergeattrs(attrs,{class:"nav"},{vertical:"flex-column",style:"nav-%",fill:"nav-fill",justified:"justified"}),children));ui.navItem=component("bs-nav-item",(attrs,children)=>h("li",mergeattrs(attrs,{class:"nav-item"}),children));ui.navLink=component("bs-nav-link",(attrs,children)=>h("a",mergeattrs(attrs,{class:"nav-link"},{active:"active",disabled:"disabled"}),children));ui.navItemLink=component("bs-nav-item-link",(attrs,children)=>ui.navItem({},ui.navLink(attrs,children)));ui.navDropdown=component("bs-nav-dropdown",(attrs,children)=>ui.navItem({class:"dropdown"},ui.navLink(mergeattrs(attrs,{class:"dropdown-toggle","data-toggle":"dropdown",role:"button","aria-haspopup":"true","aria-expanded":"false"},{label:null}),attrs.label),ui.dropdownMenu(mergeattrs(attrs,{},{},["rightmenu"]),children)));ui.navbar=component("bs-navbar",(attrs,children)=>{let content=[attrs.brand?h("a",{class:"navbar-brand",href:attrs.brandhref||"#"},attrs.brand):null];if(children.length){content.push(h("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarContent","aria-controls":"#navbarContent","aria-expanded":"false","aria-label":"Toggle navigation"},h("span",{class:"navbar-toggler-icon"})),h("div",{class:"collapse navbar-collapse",id:"navbarContent"},children))}else{content.push(children)}return h("nav",mergeattrs(attrs,{class:"navbar",expand:children.length?"lg":false,theme:"dark",bg:"dark"},{expand:"navbar-expand-%",theme:"navbar-%",bg:"bg-%"}),content)});ui.navbarNav=component("bs-navbar-nav",(attrs,children)=>h("ul",mergeattrs(attrs,{class:"navbar-nav"}),children));ui.navbarText=component("bs-navbar-text",(attrs,children)=>h("span",mergeattrs(attrs,{class:"navbar-text"}),children));ui.progressBar=component("bs-progress-bar",(attrs,children)=>h("div",mergeattrs(attrs,{class:"progress"},{pct:null,bg:null,legend:null}),h("div",mergeattrs(attrs,{class:"progress-bar",role:"progressbar","aria-valuenow":attrs.pct||0,"aria-valuemin":"0","aria-valuemax":100,style:`width: ${attrs.pct}%;`},{bg:"bg-%",stripped:"progress-bar-striped",animated:"progress-bar-animated"},[]),attrs.legend?attrs.pct+"%":null,children)));gousse.attributeAnnotations["bs-tooltip"]=((node,value)=>{node.setAttribute("title",value);node.setAttribute("data-toggle","tooltip");if(typeof $!=="undefined"){$(node).tooltip()}});gousse.attributeAnnotations["bs-tooltip-html"]=((node,value)=>{node.setAttribute("title",value);node.setAttribute("data-toggle","tooltip");node.setAttribute("data-html","true");if(typeof $!=="undefined"){$(node).tooltip()}});ui.formRow=component("bs-form-row",(attrs,children)=>h("div",mergeattrs(attrs,{class:"form-row"})));ui.formGroup=component("bs-form-group",(attrs,children)=>h("div",mergeattrs(attrs,{class:"form-group"},{label:null}),attrs.label?h("label",mergeattrs(attrs,{},{},["for"]),attrs.label):null,children,attrs.help?h("small",{class:"form-text text-muted"},attrs.help):null));ui.formInput=component("bs-form-input",(attrs,children)=>h("input",mergeattrs(attrs,{class:"form-control",type:"text"},{size:"form-control-%"})));ui.formFile=component("bs-form-file",(attrs,children)=>h("input",mergeattrs(attrs,{class:"form-control-file",type:"file"},{size:"form-control-%"})));ui.formRange=component("bs-form-range",(attrs,children)=>h("input",mergeattrs(attrs,{class:"form-control-range",type:"range"},{size:"form-control-%"})));ui.formSelect=component("bs-form-select",(attrs,children)=>h("select",mergeattrs(attrs,{class:"form-control"},{size:"form-control-%"}),children));ui.formTextarea=component("bs-form-textarea",(attrs,children)=>h("textarea",mergeattrs(attrs,{class:"form-control"},{size:"form-control-%"}),children));ui.formPlainText=component("bs-form-plaintext",(attrs,children)=>h("input",mergeattrs(attrs,{class:"form-control-plaintext",type:"text",readonly:"readonly"},{size:"form-control-%"})));["Input","File","Range","Select","Textarea","PlainText"].forEach(name=>{ui["formGroup"+name]=component("bs-form-group-"+name.toLowerCase(),(attrs,children)=>ui.formGroup(mergeattrs(attrs,{},{},["label","for","help"]),ui["form"+name](mergeattrs(attrs,{},{help:null,for:null,label:null}),children)))});ui.formCheckbox=component("bs-form-checkbox",(attrs,children)=>h("input",mergeattrs(attrs,{class:"form-check-input",type:"checkbox"})));ui.formGroupCheckbox=component("bs-form-group-checkbox",(attrs,children)=>ui.formGroup(mergeattrs(attrs,{},{},["help"]),ui.formCheckbox(mergeattrs(attrs,{},{help:null,for:null,label:null})),h("label",mergeattrs(attrs,{class:"form-check-label"},{},["for"]),attrs.label),children));ui.modal=component("bs-modal",(attrs,children)=>{let content=[];if(attrs.title){content.push(h("div",{class:"modal-header"},h("h5",{class:"modal-title"},attrs.title),typeof attrs.dismissable==="undefined"||attrs.dismissable?h("button",mergeattrs(attrs,{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},{ondismiss:(v,out)=>{out["onclick"]=v}},[]),h("span",{"aria-hidden":"true"},"×")):null))}content.push(h("div",{class:"modal-body"},children));if(attrs.footer){content.push(h("div",{class:"modal-footer"},attrs.footer))}else if(attrs["cancel-btn"]||attrs["ok-btn"]){content.push(h("div",{class:"modal-footer"},attrs["cancel-btn"]?ui.btn(mergeattrs(attrs,{color:attrs["cancel-btn-color"]||"secondary","data-dismiss":"modal"},{oncancel:(v,out)=>{out["onclick"]=v}},[]),attrs["cancel-btn"]):null,attrs["ok-btn"]?ui.btn(mergeattrs(attrs,{color:attrs["ok-btn-color"]||"primary","data-dismiss":attrs["no-ok-dismiss"]?null:"modal"},{onok:(v,out)=>{out["onclick"]=v}},[]),attrs["ok-btn"]):null))}return h("div",mergeattrs(attrs,{class:"modal",tabindex:"-1",role:"dialog","aria-hidden":"true"},{fade:"fade"},["id"]),h("div",mergeattrs(attrs,{class:"modal-dialog",role:"document"},{centered:"modal-dialog-centered",size:"modal-%"},[]),h("div",{class:"modal-content"},content)))});gousse.attributeAnnotations["bs-open-modal"]=((node,value)=>{node.setAttribute("data-toggle","modal");node.setAttribute("data-target",value)});ui.dialog=((attrs,...children)=>{return new Promise((resolve,reject)=>{const modal=ui.modal(Object.assign({onok:()=>resolve(),oncancel:()=>reject(),ondismiss:()=>attrs["resolve-on-dismiss"]?resolve():reject()},attrs||{}),...children);dom.append(document.body,modal);$(modal).on("hidden.bs.modal",()=>dom.remove(modal));$(modal).modal("show")})});ui.alertDialog=((message,attrs)=>{return ui.dialog(Object.assign({"ok-btn":"Close","resolve-on-dismiss":true},attrs||{}),message)});ui.confirmDialog=((message,attrs)=>{return ui.dialog(Object.assign({"ok-btn":"Yes","cancel-btn":"No",dismissable:false},attrs||{}),message)});ui.icon=component("fa-icon",(attrs,children)=>h("i",mergeattrs(attrs,{},{brand:"fab fa-%",i:"fas fa-%",size:"fa-%",fw:"fa-fw",rotate:"fa-rotate-%",flip:"fa-flip-%",spin:"fa-spin",pulse:"fa-pulse",stack:"fa-stack-%",inverse:"fa-inverse"})));ui.iconStack=component("fa-icon-stack",(attrs,children)=>h("span",mergeattrs(attrs,{class:"fa-stack"},{size:"fa-%"}),children));ui.iconLi=component("fa-icon-li",(attrs,children)=>h("span",{class:"fa-li"},ui.icon(attrs)));ui.loadAssets=(assets=>{let cssPromises=[],jsPromiseChain;(assets||ui.assets).forEach(url=>{let hash=null,el;if(url.indexOf("#integrity=")!==-1){[url,hash]=url.split("#integrity=")}const load=()=>new Promise((resolve,reject)=>{if(url.match(/\.css$/)){el=h("link",mergeattrs({href:url,rel:"stylesheet",integrity:hash,crossorigin:"anonymous"}))}else{el=h("script",mergeattrs({src:url,integrity:hash,crossorigin:"anonymous"}))}el.onload=(()=>resolve());el.onerror=(()=>reject());gousse.dom.append(document.head,el)});if(url.match(/\.css$/)){cssPromises.push(load())}else{jsPromiseChain=jsPromiseChain?jsPromiseChain.then(load):load()}});return Promise.all([Promise.all(cssPromises),Promise.resolve(jsPromiseChain)])});function component(name,renderer){const func=(attrs,...args)=>{return renderer(mergeattrs(attrs,{class:name}),...args)};if(gousse.component.customElementsAvailable){return gousse.component(name,func,"replace")}return gousse.component(func)}function mergeattrs(attrs,defaults,mapping,allowedAttrs){defaults=defaults||{};function allowed(name){if(allowedAttrs!==undefined){for(let allowedAttr of allowedAttrs){if(typeof allowedAttr==="string"&&name===allowedAttr||typeof allowedAttr!=="string"&&name.search(allowedAttr)!==-1){return true}}return false}return true}let out={class:[]};let mappingAttrs=mapping?Object.keys(mapping):[];[defaults,attrs].forEach((obj,i)=>{Object.entries(obj).forEach(([name,value])=>{if(i===1&&!allowed(name))return;if(name==="class"){if(Array.isArray(value)){out.class=out.class.concat(value)}else{out.class.push(value)}}else if(mappingAttrs.indexOf(name)===-1&&value!==null&&value!==undefined){out[name]=value==="true"?true:value==="false"?false:value}})});if(mapping){Object.entries(Object.assign({},defaults,attrs)).forEach(([name,value])=>{value=value==="true"?true:value==="false"?false:value;if(typeof mapping[name]!=="undefined"){let handler=mapping[name];if(typeof handler==="function"){let r=mapping[name](value,out);if(typeof r!=="undefined"){out.class.push(r)}}else if(handler!==null&&value){out.class.push(typeof value==="string"?handler.replace("%",value):handler)}}})}out.class=Array.from(new Set(out.class.filter(Boolean))).join(" ");if(out.class===""){delete out.class}return out}ui.mergeattrs=mergeattrs});